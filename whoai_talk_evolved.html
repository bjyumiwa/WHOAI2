<!-- FILE: /WHOAI2/whoai_talk_evolved.html -->
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>会話 | WhoAI（進化後）</title>
<meta name="color-scheme" content="dark light" />
<style>
  /* 背景は body のみに一枚だけ */
  html,body{height:100%;margin:0;overflow:hidden}
  body{
    font-family:"Noto Sans JP",system-ui,sans-serif;color:#fff;
    background:#000 url("space_background.png") center/cover fixed no-repeat;
    display:flex;align-items:center;justify-content:center;padding:12px;
  }

  /* ステージはガラス感（背景を持たせない） */
  .stage{
    position:relative;
    width:min(92vw,820px);
    aspect-ratio:1/0.75; /* 横長 */
    border-radius:24px;
    background:rgba(0,0,0,.22);
    backdrop-filter:blur(3px);
    -webkit-backdrop-filter:blur(3px);
    border:1px solid rgba(255,255,255,.18);
    box-shadow:0 10px 28px rgba(0,0,0,.35) inset, 0 10px 28px rgba(0,0,0,.25);
    overflow:hidden;
  }

  /* キャラの回遊（にょき→回遊） */
  .charWrap{
    position:absolute;left:50%;top:70%;
    transform:translate(-50%,0) translateY(120%);
    z-index:2;
    animation:
      emerge 1200ms cubic-bezier(.17,.84,.25,1) 200ms both,
      roamPath 36s ease-in-out 1.6s infinite alternate;
  }
  .charImg{
    width:min(22vw,220px);           /* 小さめ */
    max-width:40vmin;
    object-fit:contain;
    filter:drop-shadow(0 10px 22px rgba(0,0,0,.45));
    pointer-events:none;
    animation:bob 7s ease-in-out infinite;
  }

  /* 漂うUI（励ましバブル） */
  .bubble{
    position:absolute; z-index:5;
    background:rgba(0,0,0,.55); color:#fff;
    padding:8px 12px; border-radius:14px; font-size:.95rem;
    opacity:0; transition:opacity .4s ease, left 1.1s ease, top 1.1s ease;
    user-select:none; -webkit-user-select:none;
    box-shadow:0 6px 14px rgba(0,0,0,.25);
  }

  /* 任意で使える浮遊ボタン（左上に時々出る） */
  .floatBtn{
    position:absolute; z-index:5;
    background:rgba(255,255,255,.85); color:#111;
    font-weight:700; border:none; border-radius:14px;
    padding:8px 12px; cursor:pointer;
    opacity:.95; box-shadow:0 6px 18px rgba(0,0,0,.28);
    transition:left 1.1s ease, top 1.1s ease, opacity .4s ease;
  }

  /* 右下の保険ボタン（常に押せる） */
  .safety{
    position:fixed; right:14px; bottom:14px; z-index:10;
    background:rgba(255,255,255,.95); color:#111; border:none; border-radius:14px;
    padding:10px 14px; font-weight:700; font-size:.95rem; cursor:pointer;
    box-shadow:0 6px 18px rgba(0,0,0,.32);
  }

  /* アニメーション */
  @keyframes emerge{
    0%   { transform:translate(-50%,0) translateY(120%); opacity:0; }
    70%  { transform:translate(-50%,0) translateY(-6%);  opacity:1; }
    100% { transform:translate(-50%,0) translateY(0);    opacity:1; }
  }
  @keyframes bob{
    0%,100%{ transform:translateY(-8px) }
    50%   { transform:translateY(  8px) }
  }
  /* 画面中をゆっくり巡回（%でパス指定） */
  @keyframes roamPath{
    0%   { left:20%; top:72%; }
    18%  { left:34%; top:56%; }
    36%  { lef
